paths:
  segy_files:
    - /home/dcuser/data/ActiveSeisField/TSTKRES/shotgath.sgy
  fb_files:
    - /home/dcuser/data/ActiveSeisField/TSTKRES/fb_time_all_1341ch.crd.0613.ReMerge.npy
  out_dir: ./_blindtrace_out

dataset:
  primary_keys: [ffid]
  max_trials: 2048
  use_header_cache: true
  verbose: true

transform:
  time_len: 5024
  per_trace_standardize: true

fbgate:
  apply_on: "off"
  min_pick_ratio: 0.1

mask:
  ratio: 0.5
  mode: replace
  noise_std: 1.0

input:
  use_offset_ch: false
  offset_normalize: true
  use_time_ch: false

train:
  seed: 42
  loss_kind: shift_robust_mse
  shift_max: 5
  loss_scope: masked_only
  batch_size: 8
  num_workers: 0
  amp: true
  max_norm: 1.0
  lr: 1.0e-4
  weight_decay: 1.0e-4
  epochs: 10
  samples_per_epoch: 256
  subset_traces: 128

infer:
  seed: 43
  batch_size: 1
  num_workers: 0
  max_batches: 12
  subset_traces: 128

tile:
  tile_h: 128
  overlap_h: 64
  tiles_per_batch: 16
  amp: true
  use_tqdm: false

vis:
  n: 5
  out_subdir: vis
  cmap: seismic
  vmin: -3
  vmax: 3
  transpose_for_trace_time: true
  per_trace_norm: true
  per_trace_eps: 1.0e-8
  figsize: [20.0, 15.0]
  dpi: 300

model:
  backbone: resnet18
  pretrained: true

ckpt:
  save_best_only: true
  metric: infer_loss
  mode: min
